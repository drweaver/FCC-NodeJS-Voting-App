html
  head
    // Load the AJAX API
    script(type='text/javascript', src='https://www.gstatic.com/charts/loader.js')
    script(type='text/javascript').
      var json = '!{JSON.stringify(docs[0])}';
      var xobj = JSON.parse(json);      
      var item_rows = [];
      for ( i = 0 ; i < xobj.items.length ; i++ ) {
        console.log(xobj.items[i].item);
        item_rows.push(
          [ xobj.items[i].item, xobj.items[i].votes ]
        )
      }
      
      
      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});
      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);
      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {
      // Create the data table.
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Topping');
      data.addColumn('number', 'Slices');
      data.addRows([
      ['Mushrooms', 3],
      ['Onions', 7],
      ['Olives', 1],
      ['Zucchini', 1],
      ['Pepperoni', 2]
      ]);
      // Set chart options
      var options = {'title': xobj.name ,
      'width': 500,
      'height':300};
      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, options);
      }
  body
    // Div that will hold the pie chart
    for doc in docs      
      h2 #{doc.name} 
      br
    #chart_div
